name: GitHub Script with External
on: push
    
jobs:
  external:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: get package.json
        id: data
        run: echo ::set-output name=data::$(cat package.json)
      - name: Test output
        run: |
          echo '${{ steps.data.outputs.package }}' | jq '.[]'
      - uses: actions/github-script@v2
        with:
          github-token: ${{ secrets.GITHUB_TOKEN }}
          script: |
            const script = require(`${process.env.GITHUB_WORKSPACE}/external.js`)
            console.log(script({ github, context, core, io }, ${{ toJson(steps.data.outputs.package) }}))
